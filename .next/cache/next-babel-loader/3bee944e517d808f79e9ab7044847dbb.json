{"ast":null,"code":"import { pickOne, emojiFor } from \"../pokemon\";\nexport default {\n  id: \"fusion\",\n  triggerPhrase: \"Who's that fusion?\",\n  respond: async (event, client, prisma) => {\n    const firstPoke = await prisma.pokemon.findMany({\n      where: {\n        generation: 1\n      }\n    }).then(pokes => pickOne(pokes));\n    const secondPoke = await prisma.pokemon.findMany({\n      where: {\n        generation: 1,\n        number: {\n          not: firstPoke.number\n        }\n      }\n    }).then(pokes => pickOne(pokes));\n    const text = `<@${event.user}> It's a :${emojiFor(firstPoke)}: crossed with a :${emojiFor(secondPoke)}:`;\n    await client.chat.postMessage({\n      channel: event.channel,\n      text,\n      blocks: [{\n        type: \"section\",\n        text: {\n          type: \"mrkdwn\",\n          text\n        }\n      }, {\n        type: \"image\",\n        alt_text: \"What a monstrosity\",\n        image_url: `https://images.alexonsager.net/pokemon/fused/${firstPoke.number}/${firstPoke.number}.${secondPoke.number}.png`\n      }]\n    });\n  }\n};","map":{"version":3,"sources":["/Users/samstarling/Development/personal/pokebot/lib/responders/fusion.ts"],"names":["pickOne","emojiFor","id","triggerPhrase","respond","event","client","prisma","firstPoke","pokemon","findMany","where","generation","then","pokes","secondPoke","number","not","text","user","chat","postMessage","channel","blocks","type","alt_text","image_url"],"mappings":"AAKA,SAASA,OAAT,EAAkBC,QAAlB,QAAkC,YAAlC;AAEA,eAAe;AACbC,EAAAA,EAAE,EAAE,QADS;AAEbC,EAAAA,aAAa,EAAE,oBAFF;AAGbC,EAAAA,OAAO,EAAE,OACPC,KADO,EAEPC,MAFO,EAGPC,MAHO,KAIJ;AACH,UAAMC,SAAS,GAAG,MAAMD,MAAM,CAACE,OAAP,CACrBC,QADqB,CACZ;AAAEC,MAAAA,KAAK,EAAE;AAAEC,QAAAA,UAAU,EAAE;AAAd;AAAT,KADY,EAErBC,IAFqB,CAEfC,KAAD,IAAWd,OAAO,CAACc,KAAD,CAFF,CAAxB;AAIA,UAAMC,UAAU,GAAG,MAAMR,MAAM,CAACE,OAAP,CACtBC,QADsB,CACb;AAAEC,MAAAA,KAAK,EAAE;AAAEC,QAAAA,UAAU,EAAE,CAAd;AAAiBI,QAAAA,MAAM,EAAE;AAAEC,UAAAA,GAAG,EAAET,SAAS,CAACQ;AAAjB;AAAzB;AAAT,KADa,EAEtBH,IAFsB,CAEhBC,KAAD,IAAWd,OAAO,CAACc,KAAD,CAFD,CAAzB;AAIA,UAAMI,IAAI,GAAI,KAAIb,KAAK,CAACc,IAAK,aAAYlB,QAAQ,CAC/CO,SAD+C,CAE/C,qBAAoBP,QAAQ,CAACc,UAAD,CAAa,GAF3C;AAIA,UAAMT,MAAM,CAACc,IAAP,CAAYC,WAAZ,CAAwB;AAC5BC,MAAAA,OAAO,EAAEjB,KAAK,CAACiB,OADa;AAE5BJ,MAAAA,IAF4B;AAG5BK,MAAAA,MAAM,EAAE,CACN;AACEC,QAAAA,IAAI,EAAE,SADR;AAEEN,QAAAA,IAAI,EAAE;AACJM,UAAAA,IAAI,EAAE,QADF;AAEJN,UAAAA;AAFI;AAFR,OADM,EAQN;AACEM,QAAAA,IAAI,EAAE,OADR;AAEEC,QAAAA,QAAQ,EAAE,oBAFZ;AAGEC,QAAAA,SAAS,EAAG,gDAA+ClB,SAAS,CAACQ,MAAO,IAAGR,SAAS,CAACQ,MAAO,IAAGD,UAAU,CAACC,MAAO;AAHvH,OARM;AAHoB,KAAxB,CAAN;AAkBD;AAtCY,CAAf","sourcesContent":["import { WebClient } from \"@slack/web-api\";\nimport { PrismaClient } from \"@prisma/client\";\n\nimport { MentionEvent } from \"../slack\";\nimport { Responder } from \"./\";\nimport { pickOne, emojiFor } from \"../pokemon\";\n\nexport default {\n  id: \"fusion\",\n  triggerPhrase: \"Who's that fusion?\",\n  respond: async (\n    event: MentionEvent,\n    client: WebClient,\n    prisma: PrismaClient\n  ) => {\n    const firstPoke = await prisma.pokemon\n      .findMany({ where: { generation: 1 } })\n      .then((pokes) => pickOne(pokes));\n\n    const secondPoke = await prisma.pokemon\n      .findMany({ where: { generation: 1, number: { not: firstPoke.number } } })\n      .then((pokes) => pickOne(pokes));\n\n    const text = `<@${event.user}> It's a :${emojiFor(\n      firstPoke\n    )}: crossed with a :${emojiFor(secondPoke)}:`;\n\n    await client.chat.postMessage({\n      channel: event.channel,\n      text,\n      blocks: [\n        {\n          type: \"section\",\n          text: {\n            type: \"mrkdwn\",\n            text,\n          },\n        },\n        {\n          type: \"image\",\n          alt_text: \"What a monstrosity\",\n          image_url: `https://images.alexonsager.net/pokemon/fused/${firstPoke.number}/${firstPoke.number}.${secondPoke.number}.png`,\n        },\n      ],\n    });\n  },\n} as Responder;\n"]},"metadata":{},"sourceType":"module"}