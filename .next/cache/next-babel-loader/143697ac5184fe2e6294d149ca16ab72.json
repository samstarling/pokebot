{"ast":null,"code":"import { emojiFor, currentPokemonForUser } from \"../pokemon\";\nexport default {\n  id: \"query-latest-pokemon\",\n  triggerPhrase: \"Who's my Pokémon?\",\n  respond: async (event, client, prisma) => {\n    currentPokemonForUser(prisma, event.team, event.user).then(async poke => {\n      console.log(\"poke is\", poke);\n\n      if (!poke) {\n        await client.chat.postMessage({\n          channel: event.channel,\n          text: `<@${event.user}>: You've not rolled a Pokémon yet`\n        });\n      } else {\n        await client.chat.postMessage({\n          channel: event.channel,\n          text: `<@${event.user}>: Your last roll was :${emojiFor(poke)}: ${poke.name.english}`\n        });\n      }\n    });\n  }\n};","map":{"version":3,"sources":["/Users/samstarling/Development/personal/pokebot/lib/responders/latest.ts"],"names":["emojiFor","currentPokemonForUser","id","triggerPhrase","respond","event","client","prisma","team","user","then","poke","console","log","chat","postMessage","channel","text","name","english"],"mappings":"AAKA,SAASA,QAAT,EAAmBC,qBAAnB,QAAgD,YAAhD;AAEA,eAAe;AACbC,EAAAA,EAAE,EAAE,sBADS;AAEbC,EAAAA,aAAa,EAAE,mBAFF;AAGbC,EAAAA,OAAO,EAAE,OACPC,KADO,EAEPC,MAFO,EAGPC,MAHO,KAIJ;AACHN,IAAAA,qBAAqB,CAACM,MAAD,EAASF,KAAK,CAACG,IAAf,EAAqBH,KAAK,CAACI,IAA3B,CAArB,CAAsDC,IAAtD,CAA2D,MAAOC,IAAP,IAAgB;AACzEC,MAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuBF,IAAvB;;AACA,UAAI,CAACA,IAAL,EAAW;AACT,cAAML,MAAM,CAACQ,IAAP,CAAYC,WAAZ,CAAwB;AAC5BC,UAAAA,OAAO,EAAEX,KAAK,CAACW,OADa;AAE5BC,UAAAA,IAAI,EAAG,KAAIZ,KAAK,CAACI,IAAK;AAFM,SAAxB,CAAN;AAID,OALD,MAKO;AACL,cAAMH,MAAM,CAACQ,IAAP,CAAYC,WAAZ,CAAwB;AAC5BC,UAAAA,OAAO,EAAEX,KAAK,CAACW,OADa;AAE5BC,UAAAA,IAAI,EAAG,KAAIZ,KAAK,CAACI,IAAK,0BAAyBT,QAAQ,CAACW,IAAD,CAAO,KAC5DA,IAAI,CAACO,IAAL,CAAUC,OACX;AAJ2B,SAAxB,CAAN;AAMD;AACF,KAfD;AAgBD;AAxBY,CAAf","sourcesContent":["import { WebClient } from \"@slack/web-api\";\nimport { PrismaClient } from \"@prisma/client\";\n\nimport { MentionEvent } from \"../slack\";\nimport { Responder } from \"./\";\nimport { emojiFor, currentPokemonForUser } from \"../pokemon\";\n\nexport default {\n  id: \"query-latest-pokemon\",\n  triggerPhrase: \"Who's my Pokémon?\",\n  respond: async (\n    event: MentionEvent,\n    client: WebClient,\n    prisma: PrismaClient\n  ) => {\n    currentPokemonForUser(prisma, event.team, event.user).then(async (poke) => {\n      console.log(\"poke is\", poke);\n      if (!poke) {\n        await client.chat.postMessage({\n          channel: event.channel,\n          text: `<@${event.user}>: You've not rolled a Pokémon yet`,\n        });\n      } else {\n        await client.chat.postMessage({\n          channel: event.channel,\n          text: `<@${event.user}>: Your last roll was :${emojiFor(poke)}: ${\n            poke.name.english\n          }`,\n        });\n      }\n    });\n  },\n} as Responder;\n"]},"metadata":{},"sourceType":"module"}