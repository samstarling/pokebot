{"ast":null,"code":"import { emojiFor, statusFor, renderType, assignRandomPokemon } from \"../pokemon\";\nexport default {\n  id: \"whos-that-pokemon\",\n  triggerPhrase: \"Who's that Pokémon?\",\n  respond: async (event, client, prisma) => {\n    const day = new Date().getDay();\n    let generation = 1;\n\n    if (day === 4) {\n      generation = 2;\n    }\n\n    assignRandomPokemon(prisma, event.team, event.user, generation).then(async roll => {\n      let message = `:${emojiFor(roll.Pokemon)}: It’s me, ${roll.Pokemon.name}!`;\n\n      if (generation === 2) {\n        message = `:${emojiFor(roll.Pokemon)}: Thursday means 2nd gen Pokés for everyone: it’s me, ${roll.Pokemon.name}!`;\n      }\n\n      const firstMessage = await client.chat.postMessage({\n        channel: event.channel,\n        text: `<@${event.user}>: ${message}`,\n        icon_url: `https://pokeres.bastionbot.org/images/pokemon/${roll.Pokemon.number}.png`,\n        username: roll.Pokemon.name\n      });\n      const status = statusFor(roll.Pokemon);\n      await client.chat.postMessage({\n        channel: event.channel,\n        text: `<@${event.user}>: ${status}`,\n        thread_ts: firstMessage.ts,\n        icon_url: `https://gravel-pokebot.herokuapp.com/oak.png`,\n        username: \"Professor Oak\",\n        blocks: [{\n          type: \"section\",\n          text: {\n            type: \"mrkdwn\",\n            text: status\n          },\n          fields: [{\n            type: \"mrkdwn\",\n            text: renderType(roll.Pokemon)\n          }, {\n            type: \"mrkdwn\",\n            text: `*HP*: ${roll.Pokemon.hp}`\n          }, {\n            type: \"mrkdwn\",\n            text: `*Attack*: ${roll.Pokemon.attack}`\n          }, {\n            type: \"mrkdwn\",\n            text: `*Defense*: ${roll.Pokemon.defense}`\n          }, {\n            type: \"mrkdwn\",\n            text: `*Speed*: ${roll.Pokemon.speed}`\n          }, {\n            type: \"mrkdwn\",\n            text: `*Sp. Attack*: ${roll.Pokemon.specialAttack}`\n          }, {\n            type: \"mrkdwn\",\n            text: `*Sp. Defense*: ${roll.Pokemon.specialDefense}`\n          }],\n          accessory: {\n            type: \"image\",\n            image_url: `https://pokeres.bastionbot.org/images/pokemon/${roll.Pokemon.number}.png`,\n            alt_text: roll.Pokemon.name\n          }\n        }]\n      });\n    });\n  }\n};","map":null,"metadata":{},"sourceType":"module"}