{"ast":null,"code":"import { GEN_ONE_POKEMON, pickOne, emojiFor, assignPokemonToUser } from \"../pokemon\";\nexport default {\n  id: \"reroll\",\n  triggerPhrase: \"Reroll\",\n  respond: async (event, client, prisma) => {\n    if (new Date().getDay() !== 5) {\n      await client.chat.postMessage({\n        channel: event.channel,\n        text: `<@${event.user}> Sorry, you can only reroll on a Friday ${JSON.stringify(event)}`\n      });\n      return;\n    }\n\n    var pokemon = pickOne(GEN_ONE_POKEMON);\n    assignPokemonToUser(prisma, event.team, event.user, pokemon).then(() => {\n      const message = `:${emojiFor(pokemon)}: It’s ${pokemon.name.english}!`;\n      client.chat.postMessage({\n        channel: event.channel,\n        text: `<@${event.user}>: ${message}`\n      });\n    });\n  }\n};","map":{"version":3,"sources":["/Users/samstarling/Development/personal/pokebot/lib/responders/reroll.ts"],"names":["GEN_ONE_POKEMON","pickOne","emojiFor","assignPokemonToUser","id","triggerPhrase","respond","event","client","prisma","Date","getDay","chat","postMessage","channel","text","user","JSON","stringify","pokemon","team","then","message","name","english"],"mappings":"AAIA,SACEA,eADF,EAEEC,OAFF,EAGEC,QAHF,EAIEC,mBAJF,QAKO,YALP;AAQA,eAAe;AACbC,EAAAA,EAAE,EAAE,QADS;AAEbC,EAAAA,aAAa,EAAE,QAFF;AAGbC,EAAAA,OAAO,EAAE,OACPC,KADO,EAEPC,MAFO,EAGPC,MAHO,KAIJ;AACH,QAAI,IAAIC,IAAJ,GAAWC,MAAX,OAAwB,CAA5B,EAA+B;AAC7B,YAAMH,MAAM,CAACI,IAAP,CAAYC,WAAZ,CAAwB;AAC5BC,QAAAA,OAAO,EAAEP,KAAK,CAACO,OADa;AAE5BC,QAAAA,IAAI,EAAG,KACLR,KAAK,CAACS,IACP,4CAA2CC,IAAI,CAACC,SAAL,CAAeX,KAAf,CAAsB;AAJtC,OAAxB,CAAN;AAMA;AACD;;AAED,QAAIY,OAAO,GAAGlB,OAAO,CAACD,eAAD,CAArB;AACAG,IAAAA,mBAAmB,CAACM,MAAD,EAASF,KAAK,CAACa,IAAf,EAAqBb,KAAK,CAACS,IAA3B,EAAiCG,OAAjC,CAAnB,CAA6DE,IAA7D,CAAkE,MAAM;AACtE,YAAMC,OAAO,GAAI,IAAGpB,QAAQ,CAACiB,OAAD,CAAU,UAASA,OAAO,CAACI,IAAR,CAAaC,OAAQ,GAApE;AACAhB,MAAAA,MAAM,CAACI,IAAP,CAAYC,WAAZ,CAAwB;AACtBC,QAAAA,OAAO,EAAEP,KAAK,CAACO,OADO;AAEtBC,QAAAA,IAAI,EAAG,KAAIR,KAAK,CAACS,IAAK,MAAKM,OAAQ;AAFb,OAAxB;AAID,KAND;AAOD;AA1BY,CAAf","sourcesContent":["import { WebClient } from \"@slack/web-api\";\nimport { PrismaClient } from \"@prisma/client\";\n\nimport { MentionEvent } from \"../slack\";\nimport {\n  GEN_ONE_POKEMON,\n  pickOne,\n  emojiFor,\n  assignPokemonToUser,\n} from \"../pokemon\";\nimport { Responder } from \"./\";\n\nexport default {\n  id: \"reroll\",\n  triggerPhrase: \"Reroll\",\n  respond: async (\n    event: MentionEvent,\n    client: WebClient,\n    prisma: PrismaClient\n  ) => {\n    if (new Date().getDay() !== 5) {\n      await client.chat.postMessage({\n        channel: event.channel,\n        text: `<@${\n          event.user\n        }> Sorry, you can only reroll on a Friday ${JSON.stringify(event)}`,\n      });\n      return;\n    }\n\n    var pokemon = pickOne(GEN_ONE_POKEMON);\n    assignPokemonToUser(prisma, event.team, event.user, pokemon).then(() => {\n      const message = `:${emojiFor(pokemon)}: It’s ${pokemon.name.english}!`;\n      client.chat.postMessage({\n        channel: event.channel,\n        text: `<@${event.user}>: ${message}`,\n      });\n    });\n  },\n} as Responder;\n"]},"metadata":{},"sourceType":"module"}