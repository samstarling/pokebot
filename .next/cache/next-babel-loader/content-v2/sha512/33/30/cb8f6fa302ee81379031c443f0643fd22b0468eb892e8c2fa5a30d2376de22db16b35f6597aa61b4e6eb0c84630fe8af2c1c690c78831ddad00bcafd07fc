{"ast":null,"code":"import { Roll } from \"../../src/entity/Pokemon\";\nexport const emojiFor = poke => {\n  if (poke.number > 151) {\n    return \"sparkles\";\n  }\n\n  return poke.emoji || poke.name.toLowerCase();\n};\nexport const pickOne = items => {\n  if (items.length === 0) throw new Error(\"Must provide a non-empty list\");\n  return items[Math.floor(Math.random() * items.length)];\n};\nconst IMAGE_PREFIX = \"https://cdn.traction.one/pokedex/pokemon\";\nexport const imageFor = poke => {\n  if (poke.number === 492) {\n    return `${IMAGE_PREFIX}/${poke.number}-land.png`;\n  }\n\n  return `${IMAGE_PREFIX}/${poke.number}.png`;\n};\nexport const assignRandomPokemon = async (repo, rollRepo, teamId, userId, where) => {\n  return repo.find({\n    where,\n    relations: [\"roll\"]\n  }).then(pokes => pickOne(pokes)).then(poke => assignPokemonToUser(rollRepo, teamId, userId, poke));\n};\nexport const assignPokemonToUser = async (rollRepo, teamId, userId, pokemon) => {\n  const r = new Roll();\n  r.teamId = teamId;\n  r.userId = userId;\n  r.pokemon = pokemon;\n  return rollRepo.save(r);\n};\nexport const currentPokemonForUser = async (repo, teamId, userId) => {\n  const rolls = await repo.find({\n    where: {\n      teamId,\n      userId\n    },\n    relations: [\"pokemon\"],\n    order: {} // TODO: OrderBy,\n\n  });\n\n  if (rolls.length === 0) {\n    return null;\n  }\n\n  return rolls[0].pokemon;\n};\nexport const renderType = p => {\n  if (p.secondaryType) {\n    return `:pokemon_type_${p.primaryType}: ${camelCase(p.primaryType)} / :pokemon_type_${p.secondaryType}: ${camelCase(p.secondaryType)}`;\n  }\n\n  return `:pokemon_type_${p.primaryType}: ${camelCase(p.primaryType)}`;\n};\n\nconst camelCase = str => {\n  return str.charAt(0).toUpperCase() + str.slice(1);\n};\n\nexport const statusFor = pokemon => {\n  const {\n    name,\n    classification\n  } = pokemon;\n  return pickOne([`It would seem your *${name}* (${classification}) is doing OK, thanks for checking in.`, `It would seem your *${name}* (${classification}) is great – but a little hungry.`, `It would seem your *${name}* (${classification}) is annoyed that you forgot their birthday last week.`, `Your *${name}* (${classification}) is good.`, `Your *${name}* (${classification}) is strong.`, `Your *${name}* (${classification}) is flourishing.`, `Your *${name}* (${classification}) is thriving.`, `Your *${name}* (${classification}) is in good health.`, `Your *${name}* (${classification}) is bright-eyed.`, `Your *${name}* (${classification}) is wholesome.`, `Your *${name}* (${classification}) is fresh.`, `Your *${name}* (${classification}) is hearty.`, `Your *${name}* (${classification}) is prosperous.`, `Your *${name}* (${classification}) is solid as a rock.`, `Your *${name}* (${classification}) is doing well.`, `Your *${name}* (${classification}) is happy and healthy.`, `Your *${name}* (${classification}) is looking great today.`, `Your *${name}* (${classification}) thinks you look nice today.`, `Your *${name}* (${classification}) thinks you're doing a great job.`, `Your *${name}* (${classification}) is says they're lucky to have you.`, `Your *${name}* (${classification}) is just glad to be here.`, `Your *${name}* (${classification}) loves you.`, `Your *${name}* (${classification}) is alright.`, `Your *${name}* (${classification}) is... still a piece of garbage.`, `Your *${name}* (${classification}) is great.`, `Your *${name}* (${classification}) is excellent.`, `Your *${name}* (${classification}) is lovely.`, `Your *${name}* (${classification}) is completing mandatory training – Fs in chat please.`, `Your *${name}* (${classification}) has been better, actually.`, `Your *${name}* (${classification}) has the sniffles.`, `Your *${name}* (${classification}) is having a bit of a rough day.`, `Your *${name}* (${classification}) would like a hug.`, `Your *${name}* (${classification}) is suffering from the longer term effects of COVID-19.`, `Your *${name}* (${classification}) could do with a holiday.`, `Your *${name}* (${classification}) is looking forward to Christmas, which is definitely something that Pokémon celebrate.`, `Shit, that's a hench *${name}* (${classification}).`, `Goodness, what a large *${name}* (${classification}).`, `Looks like your *${name}* (${classification}) is happy.`, `Looks like your *${name}* (${classification}) is enjoying themselves.`, `Looks like your *${name}* (${classification}) is doing well.`, `Looks like your *${name}* (${classification}) is doing great.`, `Looks like your *${name}* (${classification}) is having a great time.`, `Looks like your *${name}* (${classification}) is having a well-earned break.`, `Your *${name}* (${classification}) is looking healthy.`, `Your *${name}* (${classification}) is looking happy.`, `Your *${name}* (${classification}) is well.`, `Your *${name}* (${classification}) is just great.`, `Your *${name}* (${classification}) is swell.`, `Your *${name}* (${classification}) is doing well.`, `Your *${name}* (${classification}) is doing OK.`, `Your *${name}* (${classification}) is doing great.`, `Your *${name}* (${classification}) is just fine.`]);\n};","map":null,"metadata":{},"sourceType":"module"}