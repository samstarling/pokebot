{"ast":null,"code":"import { InstallProvider } from \"@slack/oauth\";\nimport { createClient } from \"redis\";\nconst client = createClient(process.env.REDIS_URL || \"\");\nexport const installer = new InstallProvider({\n  clientId: process.env.SLACK_CLIENT_ID || \"\",\n  clientSecret: process.env.SLACK_CLIENT_SECRET || \"\",\n  stateSecret: \"hehe-gravel-lol\",\n  installationStore: {\n    storeInstallation: installation => {\n      return new Promise(function (resolve, _) {\n        if (!installation.isEnterpriseInstall && installation.team != null) {\n          client.set(installation.team.id, JSON.stringify(installation), function (err, reply) {\n            console.log(\"Reply is\", reply);\n            console.error(\"Error is\", err);\n          });\n          resolve();\n        } else {\n          throw new Error(\"Not supported\");\n        }\n      });\n    },\n    fetchInstallation: installQuery => {\n      return new Promise(function (resolve, reject) {\n        if (!installQuery.isEnterpriseInstall && installQuery.teamId != null) {\n          console.log(\"Client get\", installQuery.teamId);\n          client.get(installQuery.teamId, function (_, reply) {\n            if (reply == null) {\n              return reject();\n            }\n\n            return resolve(JSON.parse(reply));\n          });\n        } else {\n          throw new Error(\"Not supported\");\n        }\n      });\n    }\n  }\n});","map":null,"metadata":{},"sourceType":"module"}